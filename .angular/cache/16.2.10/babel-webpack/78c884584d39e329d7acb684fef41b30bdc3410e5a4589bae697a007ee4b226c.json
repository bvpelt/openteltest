{"ast":null,"code":"// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nmodule.exports = RepeatRW;\nvar inherits = require('util').inherits;\nvar BufferRW = require('./base').BufferRW;\nvar errors = require('./errors');\nfunction RepeatRW(countrw, repeatedrw) {\n  if (!(this instanceof RepeatRW)) {\n    return new RepeatRW(countrw, repeatedrw);\n  }\n  this.countrw = countrw;\n  this.repeatedrw = repeatedrw;\n  BufferRW.call(this);\n}\ninherits(RepeatRW, BufferRW);\nRepeatRW.prototype.poolByteLength = function poolByteLength(destResult, values) {\n  if (!Array.isArray(values)) {\n    return destResult.reset(errors.expected(values, 'an array'));\n  }\n  var res = this.countrw.poolByteLength(destResult, values.length);\n  if (res.err) return res;\n  var length = res.length;\n  for (var i = 0; i < values.length; i++) {\n    var partres = this.repeatedrw.poolByteLength(destResult, values[i]);\n    if (partres.err) return partres;\n    length += res.length;\n  }\n  return destResult.reset(null, length);\n};\nRepeatRW.prototype.poolWriteInto = function poolWriteInto(destResult, values, buffer, offset) {\n  if (!Array.isArray(values)) {\n    return destResult.reset(errors.expected(values, 'an array'), offset);\n  }\n  var res = this.countrw.poolWriteInto(destResult, values.length, buffer, offset);\n  if (res.err) return res;\n  offset = res.offset;\n  for (var i = 0; i < values.length; i++) {\n    res = this.repeatedrw.poolWriteInto(destResult, values[i], buffer, offset);\n    if (res.err) return res;\n    offset = res.offset;\n  }\n  return res;\n};\nRepeatRW.prototype.poolReadFrom = function poolReadFrom(destResult, buffer, offset) {\n  var res = this.countrw.poolReadFrom(destResult, buffer, offset);\n  if (res.err) return res;\n  offset = res.offset;\n  var count = res.value;\n  var values = new Array(count);\n  for (var i = 0; i < count; i++) {\n    res = this.repeatedrw.poolReadFrom(destResult, buffer, offset);\n    if (res.err) return res;\n    offset = res.offset;\n    if (Array.isArray(res.value)) values[i] = res.value.slice(0);else if (typeof res.value === 'object') values[i] = shallowCopy(res.value);else values[i] = res.value;\n  }\n  return destResult.reset(null, offset, values);\n};\nfunction shallowCopy(obj) {\n  var keys = Object.keys(obj);\n  var i;\n  var dest = {};\n  for (i = 0; i < keys.length; i++) {\n    dest[keys[i]] = obj[keys[i]];\n  }\n  return dest;\n}","map":{"version":3,"names":["module","exports","RepeatRW","inherits","require","BufferRW","errors","countrw","repeatedrw","call","prototype","poolByteLength","destResult","values","Array","isArray","reset","expected","res","length","err","i","partres","poolWriteInto","buffer","offset","poolReadFrom","count","value","slice","shallowCopy","obj","keys","Object","dest"],"sources":["/home/bvpelt/Develop/openteltest/node_modules/bufrw/repeat.js"],"sourcesContent":["// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nmodule.exports = RepeatRW;\n\nvar inherits = require('util').inherits;\n\nvar BufferRW = require('./base').BufferRW;\nvar errors = require('./errors');\n\nfunction RepeatRW(countrw, repeatedrw) {\n    if (!(this instanceof RepeatRW)) {\n        return new RepeatRW(countrw, repeatedrw);\n    }\n    this.countrw = countrw;\n    this.repeatedrw = repeatedrw;\n\n    BufferRW.call(this);\n}\ninherits(RepeatRW, BufferRW);\n\nRepeatRW.prototype.poolByteLength = function poolByteLength(destResult, values) {\n    if (!Array.isArray(values)) {\n        return destResult.reset(errors.expected(values, 'an array'));\n    }\n    var res = this.countrw.poolByteLength(destResult, values.length);\n    if (res.err) return res;\n    var length = res.length;\n    for (var i = 0; i < values.length; i++) {\n        var partres = this.repeatedrw.poolByteLength(destResult, values[i]);\n        if (partres.err) return partres;\n        length += res.length;\n    }\n    return destResult.reset(null, length);\n};\n\nRepeatRW.prototype.poolWriteInto = function poolWriteInto(destResult, values, buffer, offset) {\n    if (!Array.isArray(values)) {\n        return destResult.reset(errors.expected(values, 'an array'), offset);\n    }\n    var res = this.countrw.poolWriteInto(destResult, values.length, buffer, offset);\n    if (res.err) return res;\n    offset = res.offset;\n    for (var i = 0; i < values.length; i++) {\n        res = this.repeatedrw.poolWriteInto(destResult, values[i], buffer, offset);\n        if (res.err) return res;\n        offset = res.offset;\n    }\n    return res;\n};\n\nRepeatRW.prototype.poolReadFrom = function poolReadFrom(destResult, buffer, offset) {\n    var res = this.countrw.poolReadFrom(destResult, buffer, offset);\n    if (res.err) return res;\n    offset = res.offset;\n    var count = res.value;\n    var values = new Array(count);\n    for (var i = 0; i < count; i++) {\n        res = this.repeatedrw.poolReadFrom(destResult, buffer, offset);\n        if (res.err) return res;\n        offset = res.offset;\n\n        if (Array.isArray(res.value)) values[i] = res.value.slice(0);\n        else if (typeof res.value === 'object') values[i] = shallowCopy(res.value);\n        else values[i] = res.value;\n    }\n    return destResult.reset(null, offset, values);\n};\n\nfunction shallowCopy(obj) {\n    var keys = Object.keys(obj);\n    var i;\n    var dest = {};\n    for (i = 0; i < keys.length; i++) {\n        dest[keys[i]] = obj[keys[i]];\n    }\n    return dest;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}