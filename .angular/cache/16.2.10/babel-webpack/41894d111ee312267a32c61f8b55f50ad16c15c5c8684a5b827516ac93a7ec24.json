{"ast":null,"code":"// Copyright (c) 2018 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n'use strict';\n\nvar ast = require('./ast');\nvar Message = require('./message').Message;\nvar MessageRW = require('./message').MessageRW;\nfunction ThriftFunction(args) {\n  this.name = args.name;\n  this.service = args.service;\n  this.fullName = this.service.name + '::' + this.name;\n  this.model = args.model;\n  this.args = null;\n  this.result = null;\n  this.strict = args.strict;\n  this.linked = false;\n}\nThriftFunction.prototype.compile = function process(def, model) {\n  this.def = def;\n  this.name = def.id.name;\n  var argsId = new ast.Identifier(this.name + '_args');\n  argsId.as = this.fullName + '_args';\n  var argsStruct = new ast.Struct(argsId, def.fields);\n  argsStruct.isArgument = true;\n  this.args = model.compileStruct(argsStruct);\n  var returnType = def.returns;\n  var resultFields = def.throws || [];\n  if (returnType.type !== 'BaseType' || returnType.baseType !== 'void') {\n    var successFieldId = new ast.FieldIdentifier(0);\n    var successField = new ast.Field(successFieldId, def.returns, 'success');\n    successField.required = false;\n    successField.optional = true;\n    successField.isResult = true;\n    resultFields.unshift(successField);\n  }\n  var resultId = new ast.Identifier(this.name + '_result');\n  resultId.as = this.fullName + '_result';\n  var resultStruct = new ast.Struct(resultId, resultFields);\n  resultStruct.isResult = true;\n  this.result = model.compileStruct(resultStruct);\n  this.oneway = def.oneway;\n  this.annotations = def.annotations;\n};\nThriftFunction.prototype.link = function link(model) {\n  this.args.link(model);\n  this.result.link(model);\n  this.Arguments = this.args.Constructor;\n  this.Result = this.result.Constructor;\n\n  // TODO cover oneway, if we ever have use for it\n  // istanbul ignore next\n  var type = this.oneway ? 'ONEWAY' : 'CALL';\n  this.ArgumentsMessage = this.makeMessageConstructor(this.name, type);\n  this.ResultMessage = this.makeMessageConstructor(this.name, 'REPLY');\n  this.argumentsMessageRW = new MessageRW(this.args.rw, model.exception.rw);\n  this.resultMessageRW = new MessageRW(this.result.rw, model.exception.rw);\n};\nThriftFunction.prototype.makeMessageConstructor = function makeMessageConstructor(name, type) {\n  function FunctionMessage(message) {\n    Message.call(this, message);\n    this.name = message.name || name;\n    this.type = message.type || type;\n  }\n  return FunctionMessage;\n};\nfunction ThriftService(args) {\n  this.name = null;\n  this.functions = [];\n  this.functionsByName = Object.create(null);\n  this.surface = this.functionsByName;\n  this.strict = args.strict;\n  this.baseService = null;\n  this.linked = false;\n  this.annotations = null;\n}\nThriftService.prototype.models = 'service';\nThriftService.prototype.compile = function process(def, model) {\n  this.name = def.id.name;\n  for (var index = 0; index < def.functions.length; index++) {\n    this.compileFunction(def.functions[index], model);\n  }\n  this.baseService = def.baseService;\n  this.annotations = def.annotations;\n};\nThriftService.prototype.compileFunction = function processFunction(def, model) {\n  var thriftFunction = new ThriftFunction({\n    name: def.id.name,\n    service: this,\n    strict: this.strict\n  });\n  thriftFunction.compile(def, model);\n  this.addFunction(thriftFunction);\n};\nThriftService.prototype.addFunction = function addFunction(thriftFunction, thrift) {\n  this.functions.push(thriftFunction);\n  if (!this.functionsByName[thriftFunction.name]) {\n    this.functionsByName[thriftFunction.name] = thriftFunction;\n    if (thrift) {\n      thrift.define(this.name + '::' + thriftFunction.args.name, thriftFunction.def, thriftFunction.args);\n      thrift.define(this.name + '::' + thriftFunction.result.name, thriftFunction.def, thriftFunction.result);\n    }\n  } else {\n    throw new Error(this.name + '.' + thriftFunction.name + ' already inherited from baseService');\n  }\n};\nThriftService.prototype.link = function link(model) {\n  var index = 0;\n  if (this.linked) {\n    return this;\n  }\n  this.linked = true;\n  if (this.baseService) {\n    var baseService = model.resolveIdentifier(this.baseService, this.baseService.name, 'service');\n    baseService.link(model);\n    for (index = 0; index < baseService.functions.length; index++) {\n      var thriftFunction = baseService.functions[index];\n      this.addFunction(thriftFunction, model);\n    }\n  }\n  for (index = 0; index < this.functions.length; index++) {\n    this.functions[index].link(model);\n  }\n  model.services[this.name] = this.surface;\n\n  // istanbul ignore else\n  if (!/^[a-z]/.test(this.name)) {\n    model[this.name] = this.surface;\n  }\n  return this;\n};\nmodule.exports.ThriftFunction = ThriftFunction;\nmodule.exports.ThriftService = ThriftService;","map":{"version":3,"names":["ast","require","Message","MessageRW","ThriftFunction","args","name","service","fullName","model","result","strict","linked","prototype","compile","process","def","id","argsId","Identifier","as","argsStruct","Struct","fields","isArgument","compileStruct","returnType","returns","resultFields","throws","type","baseType","successFieldId","FieldIdentifier","successField","Field","required","optional","isResult","unshift","resultId","resultStruct","oneway","annotations","link","Arguments","Constructor","Result","ArgumentsMessage","makeMessageConstructor","ResultMessage","argumentsMessageRW","rw","exception","resultMessageRW","FunctionMessage","message","call","ThriftService","functions","functionsByName","Object","create","surface","baseService","models","index","length","compileFunction","processFunction","thriftFunction","addFunction","thrift","push","define","Error","resolveIdentifier","services","test","module","exports"],"sources":["/home/bvpelt/Develop/openteltest/node_modules/thriftrw/service.js"],"sourcesContent":["// Copyright (c) 2018 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n'use strict';\n\nvar ast = require('./ast');\nvar Message = require('./message').Message;\nvar MessageRW = require('./message').MessageRW;\n\nfunction ThriftFunction(args) {\n    this.name = args.name;\n    this.service = args.service;\n    this.fullName = this.service.name + '::' + this.name;\n    this.model = args.model;\n    this.args = null;\n    this.result = null;\n    this.strict = args.strict;\n    this.linked = false;\n}\n\nThriftFunction.prototype.compile = function process(def, model) {\n    this.def = def;\n    this.name = def.id.name;\n\n    var argsId = new ast.Identifier(this.name + '_args');\n    argsId.as = this.fullName + '_args';\n    var argsStruct = new ast.Struct(argsId, def.fields);\n    argsStruct.isArgument = true;\n    this.args = model.compileStruct(argsStruct);\n\n    var returnType = def.returns;\n    var resultFields = def.throws || [];\n    if (returnType.type !== 'BaseType' || returnType.baseType !== 'void') {\n        var successFieldId = new ast.FieldIdentifier(0);\n        var successField = new ast.Field(successFieldId, def.returns, 'success');\n        successField.required = false;\n        successField.optional = true;\n        successField.isResult = true;\n        resultFields.unshift(successField);\n    }\n\n    var resultId = new ast.Identifier(this.name + '_result');\n    resultId.as = this.fullName + '_result';\n    var resultStruct = new ast.Struct(resultId, resultFields);\n    resultStruct.isResult = true;\n    this.result = model.compileStruct(resultStruct);\n\n    this.oneway = def.oneway;\n    this.annotations = def.annotations;\n};\n\nThriftFunction.prototype.link = function link(model) {\n    this.args.link(model);\n    this.result.link(model);\n\n    this.Arguments = this.args.Constructor;\n    this.Result = this.result.Constructor;\n\n    // TODO cover oneway, if we ever have use for it\n    // istanbul ignore next\n    var type = this.oneway ? 'ONEWAY' : 'CALL';\n    this.ArgumentsMessage = this.makeMessageConstructor(this.name, type);\n    this.ResultMessage = this.makeMessageConstructor(this.name, 'REPLY');\n\n    this.argumentsMessageRW = new MessageRW(this.args.rw, model.exception.rw);\n    this.resultMessageRW = new MessageRW(this.result.rw, model.exception.rw);\n};\n\nThriftFunction.prototype.makeMessageConstructor = function makeMessageConstructor(name, type) {\n    function FunctionMessage(message) {\n        Message.call(this, message);\n        this.name = message.name || name;\n        this.type = message.type || type;\n    }\n    return FunctionMessage;\n};\n\nfunction ThriftService(args) {\n    this.name = null;\n    this.functions = [];\n    this.functionsByName = Object.create(null);\n    this.surface = this.functionsByName;\n    this.strict = args.strict;\n    this.baseService = null;\n    this.linked = false;\n    this.annotations = null;\n}\n\nThriftService.prototype.models = 'service';\n\nThriftService.prototype.compile = function process(def, model) {\n    this.name = def.id.name;\n    for (var index = 0; index < def.functions.length; index++) {\n        this.compileFunction(def.functions[index], model);\n    }\n    this.baseService = def.baseService;\n    this.annotations = def.annotations;\n};\n\nThriftService.prototype.compileFunction = function processFunction(def, model) {\n    var thriftFunction = new ThriftFunction({\n        name: def.id.name,\n        service: this,\n        strict: this.strict\n    });\n    thriftFunction.compile(def, model);\n    this.addFunction(thriftFunction);\n};\n\nThriftService.prototype.addFunction = function addFunction(thriftFunction, thrift) {\n    this.functions.push(thriftFunction);\n    if (!this.functionsByName[thriftFunction.name]) {\n        this.functionsByName[thriftFunction.name] = thriftFunction;\n        if (thrift) {\n            thrift.define(\n                this.name + '::' + thriftFunction.args.name,\n                thriftFunction.def,\n                thriftFunction.args\n            );\n\n            thrift.define(\n                this.name + '::' + thriftFunction.result.name,\n                thriftFunction.def,\n                thriftFunction.result\n            );\n        }\n    } else {\n        throw new Error(this.name + '.' + thriftFunction.name + ' already inherited from baseService');\n    }\n};\n\nThriftService.prototype.link = function link(model) {\n    var index = 0;\n\n    if (this.linked) {\n        return this;\n    }\n    this.linked = true;\n\n    if (this.baseService) {\n        var baseService = model.resolveIdentifier(this.baseService, this.baseService.name, 'service');\n        baseService.link(model);\n        for (index = 0; index < baseService.functions.length; index++) {\n            var thriftFunction = baseService.functions[index];\n            this.addFunction(thriftFunction, model);\n        }\n    }\n\n    for (index = 0; index < this.functions.length; index++) {\n        this.functions[index].link(model);\n    }\n\n    model.services[this.name] = this.surface;\n\n    // istanbul ignore else\n    if (!/^[a-z]/.test(this.name)) {\n        model[this.name] = this.surface;\n    }\n\n    return this;\n};\n\nmodule.exports.ThriftFunction = ThriftFunction;\nmodule.exports.ThriftService = ThriftService;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}