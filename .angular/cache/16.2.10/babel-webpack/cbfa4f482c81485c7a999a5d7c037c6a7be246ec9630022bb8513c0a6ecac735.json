{"ast":null,"code":"/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport { context, propagation, trace, ROOT_CONTEXT } from '@opentelemetry/api';\nimport { otperformance, TRACE_PARENT_HEADER } from '@opentelemetry/core';\nimport { addSpanNetworkEvent, addSpanNetworkEvents, hasKey, PerformanceTimingNames as PTN } from '@opentelemetry/sdk-trace-web';\nimport { InstrumentationBase, safeExecuteInTheMiddle } from '@opentelemetry/instrumentation';\nimport { AttributeNames } from './enums/AttributeNames';\nimport { VERSION } from './version';\nimport { SemanticAttributes } from '@opentelemetry/semantic-conventions';\nimport { addSpanPerformancePaintEvents, getPerformanceNavigationEntries } from './utils';\n/**\n * This class represents a document load plugin\n */\nvar DocumentLoadInstrumentation = /** @class */function (_super) {\n  __extends(DocumentLoadInstrumentation, _super);\n  /**\n   *\n   * @param config\n   */\n  function DocumentLoadInstrumentation(config) {\n    if (config === void 0) {\n      config = {};\n    }\n    var _this = _super.call(this, '@opentelemetry/instrumentation-document-load', VERSION, config) || this;\n    _this.component = 'document-load';\n    _this.version = '1';\n    _this.moduleName = _this.component;\n    return _this;\n  }\n  DocumentLoadInstrumentation.prototype.init = function () {};\n  /**\n   * callback to be executed when page is loaded\n   */\n  DocumentLoadInstrumentation.prototype._onDocumentLoaded = function () {\n    var _this = this;\n    // Timeout is needed as load event doesn't have yet the performance metrics for loadEnd.\n    // Support for event \"loadend\" is very limited and cannot be used\n    window.setTimeout(function () {\n      _this._collectPerformance();\n    });\n  };\n  /**\n   * Adds spans for all resources\n   * @param rootSpan\n   */\n  DocumentLoadInstrumentation.prototype._addResourcesSpans = function (rootSpan) {\n    var _this = this;\n    var _a, _b;\n    var resources = (_b = (_a = otperformance).getEntriesByType) === null || _b === void 0 ? void 0 : _b.call(_a, 'resource');\n    if (resources) {\n      resources.forEach(function (resource) {\n        _this._initResourceSpan(resource, rootSpan);\n      });\n    }\n  };\n  /**\n   * Collects information about performance and creates appropriate spans\n   */\n  DocumentLoadInstrumentation.prototype._collectPerformance = function () {\n    var _this = this;\n    var metaElement = Array.from(document.getElementsByTagName('meta')).find(function (e) {\n      return e.getAttribute('name') === TRACE_PARENT_HEADER;\n    });\n    var entries = getPerformanceNavigationEntries();\n    var traceparent = metaElement && metaElement.content || '';\n    context.with(propagation.extract(ROOT_CONTEXT, {\n      traceparent: traceparent\n    }), function () {\n      var _a;\n      var rootSpan = _this._startSpan(AttributeNames.DOCUMENT_LOAD, PTN.FETCH_START, entries);\n      if (!rootSpan) {\n        return;\n      }\n      context.with(trace.setSpan(context.active(), rootSpan), function () {\n        var fetchSpan = _this._startSpan(AttributeNames.DOCUMENT_FETCH, PTN.FETCH_START, entries);\n        if (fetchSpan) {\n          fetchSpan.setAttribute(SemanticAttributes.HTTP_URL, location.href);\n          context.with(trace.setSpan(context.active(), fetchSpan), function () {\n            var _a;\n            addSpanNetworkEvents(fetchSpan, entries);\n            _this._addCustomAttributesOnSpan(fetchSpan, (_a = _this._getConfig().applyCustomAttributesOnSpan) === null || _a === void 0 ? void 0 : _a.documentFetch);\n            _this._endSpan(fetchSpan, PTN.RESPONSE_END, entries);\n          });\n        }\n      });\n      rootSpan.setAttribute(SemanticAttributes.HTTP_URL, location.href);\n      rootSpan.setAttribute(SemanticAttributes.HTTP_USER_AGENT, navigator.userAgent);\n      _this._addResourcesSpans(rootSpan);\n      addSpanNetworkEvent(rootSpan, PTN.FETCH_START, entries);\n      addSpanNetworkEvent(rootSpan, PTN.UNLOAD_EVENT_START, entries);\n      addSpanNetworkEvent(rootSpan, PTN.UNLOAD_EVENT_END, entries);\n      addSpanNetworkEvent(rootSpan, PTN.DOM_INTERACTIVE, entries);\n      addSpanNetworkEvent(rootSpan, PTN.DOM_CONTENT_LOADED_EVENT_START, entries);\n      addSpanNetworkEvent(rootSpan, PTN.DOM_CONTENT_LOADED_EVENT_END, entries);\n      addSpanNetworkEvent(rootSpan, PTN.DOM_COMPLETE, entries);\n      addSpanNetworkEvent(rootSpan, PTN.LOAD_EVENT_START, entries);\n      addSpanNetworkEvent(rootSpan, PTN.LOAD_EVENT_END, entries);\n      addSpanPerformancePaintEvents(rootSpan);\n      _this._addCustomAttributesOnSpan(rootSpan, (_a = _this._getConfig().applyCustomAttributesOnSpan) === null || _a === void 0 ? void 0 : _a.documentLoad);\n      _this._endSpan(rootSpan, PTN.LOAD_EVENT_END, entries);\n    });\n  };\n  /**\n   * Helper function for ending span\n   * @param span\n   * @param performanceName name of performance entry for time end\n   * @param entries\n   */\n  DocumentLoadInstrumentation.prototype._endSpan = function (span, performanceName, entries) {\n    // span can be undefined when entries are missing the certain performance - the span will not be created\n    if (span) {\n      if (hasKey(entries, performanceName)) {\n        span.end(entries[performanceName]);\n      } else {\n        // just end span\n        span.end();\n      }\n    }\n  };\n  /**\n   * Creates and ends a span with network information about resource added as timed events\n   * @param resource\n   * @param parentSpan\n   */\n  DocumentLoadInstrumentation.prototype._initResourceSpan = function (resource, parentSpan) {\n    var _a;\n    var span = this._startSpan(AttributeNames.RESOURCE_FETCH, PTN.FETCH_START, resource, parentSpan);\n    if (span) {\n      span.setAttribute(SemanticAttributes.HTTP_URL, resource.name);\n      addSpanNetworkEvents(span, resource);\n      this._addCustomAttributesOnResourceSpan(span, resource, (_a = this._getConfig().applyCustomAttributesOnSpan) === null || _a === void 0 ? void 0 : _a.resourceFetch);\n      this._endSpan(span, PTN.RESPONSE_END, resource);\n    }\n  };\n  /**\n   * Helper function for starting a span\n   * @param spanName name of span\n   * @param performanceName name of performance entry for time start\n   * @param entries\n   * @param parentSpan\n   */\n  DocumentLoadInstrumentation.prototype._startSpan = function (spanName, performanceName, entries, parentSpan) {\n    if (hasKey(entries, performanceName) && typeof entries[performanceName] === 'number') {\n      var span = this.tracer.startSpan(spanName, {\n        startTime: entries[performanceName]\n      }, parentSpan ? trace.setSpan(context.active(), parentSpan) : undefined);\n      return span;\n    }\n    return undefined;\n  };\n  /**\n   * executes callback {_onDocumentLoaded} when the page is loaded\n   */\n  DocumentLoadInstrumentation.prototype._waitForPageLoad = function () {\n    if (window.document.readyState === 'complete') {\n      this._onDocumentLoaded();\n    } else {\n      this._onDocumentLoaded = this._onDocumentLoaded.bind(this);\n      window.addEventListener('load', this._onDocumentLoaded);\n    }\n  };\n  DocumentLoadInstrumentation.prototype._getConfig = function () {\n    return this._config;\n  };\n  /**\n   * adds custom attributes to root span if configured\n   */\n  DocumentLoadInstrumentation.prototype._addCustomAttributesOnSpan = function (span, applyCustomAttributesOnSpan) {\n    var _this = this;\n    if (applyCustomAttributesOnSpan) {\n      safeExecuteInTheMiddle(function () {\n        return applyCustomAttributesOnSpan(span);\n      }, function (error) {\n        if (!error) {\n          return;\n        }\n        _this._diag.error('addCustomAttributesOnSpan', error);\n      }, true);\n    }\n  };\n  /**\n   * adds custom attributes to span if configured\n   */\n  DocumentLoadInstrumentation.prototype._addCustomAttributesOnResourceSpan = function (span, resource, applyCustomAttributesOnSpan) {\n    var _this = this;\n    if (applyCustomAttributesOnSpan) {\n      safeExecuteInTheMiddle(function () {\n        return applyCustomAttributesOnSpan(span, resource);\n      }, function (error) {\n        if (!error) {\n          return;\n        }\n        _this._diag.error('addCustomAttributesOnResourceSpan', error);\n      }, true);\n    }\n  };\n  /**\n   * implements enable function\n   */\n  DocumentLoadInstrumentation.prototype.enable = function () {\n    // remove previously attached load to avoid adding the same event twice\n    // in case of multiple enable calling.\n    window.removeEventListener('load', this._onDocumentLoaded);\n    this._waitForPageLoad();\n  };\n  /**\n   * implements disable function\n   */\n  DocumentLoadInstrumentation.prototype.disable = function () {\n    window.removeEventListener('load', this._onDocumentLoaded);\n  };\n  return DocumentLoadInstrumentation;\n}(InstrumentationBase);\nexport { DocumentLoadInstrumentation };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","context","propagation","trace","ROOT_CONTEXT","otperformance","TRACE_PARENT_HEADER","addSpanNetworkEvent","addSpanNetworkEvents","hasKey","PerformanceTimingNames","PTN","InstrumentationBase","safeExecuteInTheMiddle","AttributeNames","VERSION","SemanticAttributes","addSpanPerformancePaintEvents","getPerformanceNavigationEntries","DocumentLoadInstrumentation","_super","config","_this","component","version","moduleName","init","_onDocumentLoaded","window","setTimeout","_collectPerformance","_addResourcesSpans","rootSpan","_a","_b","resources","getEntriesByType","forEach","resource","_initResourceSpan","metaElement","from","document","getElementsByTagName","find","e","getAttribute","entries","traceparent","content","with","extract","_startSpan","DOCUMENT_LOAD","FETCH_START","setSpan","active","fetchSpan","DOCUMENT_FETCH","setAttribute","HTTP_URL","location","href","_addCustomAttributesOnSpan","_getConfig","applyCustomAttributesOnSpan","documentFetch","_endSpan","RESPONSE_END","HTTP_USER_AGENT","navigator","userAgent","UNLOAD_EVENT_START","UNLOAD_EVENT_END","DOM_INTERACTIVE","DOM_CONTENT_LOADED_EVENT_START","DOM_CONTENT_LOADED_EVENT_END","DOM_COMPLETE","LOAD_EVENT_START","LOAD_EVENT_END","documentLoad","span","performanceName","end","parentSpan","RESOURCE_FETCH","name","_addCustomAttributesOnResourceSpan","resourceFetch","spanName","tracer","startSpan","startTime","undefined","_waitForPageLoad","readyState","bind","addEventListener","_config","error","_diag","enable","removeEventListener","disable"],"sources":["/home/bvpelt/Develop/openteltest/node_modules/@opentelemetry/instrumentation-document-load/build/esm/instrumentation.js"],"sourcesContent":["/*\n * Copyright The OpenTelemetry Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { context, propagation, trace, ROOT_CONTEXT, } from '@opentelemetry/api';\nimport { otperformance, TRACE_PARENT_HEADER } from '@opentelemetry/core';\nimport { addSpanNetworkEvent, addSpanNetworkEvents, hasKey, PerformanceTimingNames as PTN, } from '@opentelemetry/sdk-trace-web';\nimport { InstrumentationBase, safeExecuteInTheMiddle, } from '@opentelemetry/instrumentation';\nimport { AttributeNames } from './enums/AttributeNames';\nimport { VERSION } from './version';\nimport { SemanticAttributes } from '@opentelemetry/semantic-conventions';\nimport { addSpanPerformancePaintEvents, getPerformanceNavigationEntries, } from './utils';\n/**\n * This class represents a document load plugin\n */\nvar DocumentLoadInstrumentation = /** @class */ (function (_super) {\n    __extends(DocumentLoadInstrumentation, _super);\n    /**\n     *\n     * @param config\n     */\n    function DocumentLoadInstrumentation(config) {\n        if (config === void 0) { config = {}; }\n        var _this = _super.call(this, '@opentelemetry/instrumentation-document-load', VERSION, config) || this;\n        _this.component = 'document-load';\n        _this.version = '1';\n        _this.moduleName = _this.component;\n        return _this;\n    }\n    DocumentLoadInstrumentation.prototype.init = function () { };\n    /**\n     * callback to be executed when page is loaded\n     */\n    DocumentLoadInstrumentation.prototype._onDocumentLoaded = function () {\n        var _this = this;\n        // Timeout is needed as load event doesn't have yet the performance metrics for loadEnd.\n        // Support for event \"loadend\" is very limited and cannot be used\n        window.setTimeout(function () {\n            _this._collectPerformance();\n        });\n    };\n    /**\n     * Adds spans for all resources\n     * @param rootSpan\n     */\n    DocumentLoadInstrumentation.prototype._addResourcesSpans = function (rootSpan) {\n        var _this = this;\n        var _a, _b;\n        var resources = (_b = (_a = otperformance).getEntriesByType) === null || _b === void 0 ? void 0 : _b.call(_a, 'resource');\n        if (resources) {\n            resources.forEach(function (resource) {\n                _this._initResourceSpan(resource, rootSpan);\n            });\n        }\n    };\n    /**\n     * Collects information about performance and creates appropriate spans\n     */\n    DocumentLoadInstrumentation.prototype._collectPerformance = function () {\n        var _this = this;\n        var metaElement = Array.from(document.getElementsByTagName('meta')).find(function (e) { return e.getAttribute('name') === TRACE_PARENT_HEADER; });\n        var entries = getPerformanceNavigationEntries();\n        var traceparent = (metaElement && metaElement.content) || '';\n        context.with(propagation.extract(ROOT_CONTEXT, { traceparent: traceparent }), function () {\n            var _a;\n            var rootSpan = _this._startSpan(AttributeNames.DOCUMENT_LOAD, PTN.FETCH_START, entries);\n            if (!rootSpan) {\n                return;\n            }\n            context.with(trace.setSpan(context.active(), rootSpan), function () {\n                var fetchSpan = _this._startSpan(AttributeNames.DOCUMENT_FETCH, PTN.FETCH_START, entries);\n                if (fetchSpan) {\n                    fetchSpan.setAttribute(SemanticAttributes.HTTP_URL, location.href);\n                    context.with(trace.setSpan(context.active(), fetchSpan), function () {\n                        var _a;\n                        addSpanNetworkEvents(fetchSpan, entries);\n                        _this._addCustomAttributesOnSpan(fetchSpan, (_a = _this._getConfig().applyCustomAttributesOnSpan) === null || _a === void 0 ? void 0 : _a.documentFetch);\n                        _this._endSpan(fetchSpan, PTN.RESPONSE_END, entries);\n                    });\n                }\n            });\n            rootSpan.setAttribute(SemanticAttributes.HTTP_URL, location.href);\n            rootSpan.setAttribute(SemanticAttributes.HTTP_USER_AGENT, navigator.userAgent);\n            _this._addResourcesSpans(rootSpan);\n            addSpanNetworkEvent(rootSpan, PTN.FETCH_START, entries);\n            addSpanNetworkEvent(rootSpan, PTN.UNLOAD_EVENT_START, entries);\n            addSpanNetworkEvent(rootSpan, PTN.UNLOAD_EVENT_END, entries);\n            addSpanNetworkEvent(rootSpan, PTN.DOM_INTERACTIVE, entries);\n            addSpanNetworkEvent(rootSpan, PTN.DOM_CONTENT_LOADED_EVENT_START, entries);\n            addSpanNetworkEvent(rootSpan, PTN.DOM_CONTENT_LOADED_EVENT_END, entries);\n            addSpanNetworkEvent(rootSpan, PTN.DOM_COMPLETE, entries);\n            addSpanNetworkEvent(rootSpan, PTN.LOAD_EVENT_START, entries);\n            addSpanNetworkEvent(rootSpan, PTN.LOAD_EVENT_END, entries);\n            addSpanPerformancePaintEvents(rootSpan);\n            _this._addCustomAttributesOnSpan(rootSpan, (_a = _this._getConfig().applyCustomAttributesOnSpan) === null || _a === void 0 ? void 0 : _a.documentLoad);\n            _this._endSpan(rootSpan, PTN.LOAD_EVENT_END, entries);\n        });\n    };\n    /**\n     * Helper function for ending span\n     * @param span\n     * @param performanceName name of performance entry for time end\n     * @param entries\n     */\n    DocumentLoadInstrumentation.prototype._endSpan = function (span, performanceName, entries) {\n        // span can be undefined when entries are missing the certain performance - the span will not be created\n        if (span) {\n            if (hasKey(entries, performanceName)) {\n                span.end(entries[performanceName]);\n            }\n            else {\n                // just end span\n                span.end();\n            }\n        }\n    };\n    /**\n     * Creates and ends a span with network information about resource added as timed events\n     * @param resource\n     * @param parentSpan\n     */\n    DocumentLoadInstrumentation.prototype._initResourceSpan = function (resource, parentSpan) {\n        var _a;\n        var span = this._startSpan(AttributeNames.RESOURCE_FETCH, PTN.FETCH_START, resource, parentSpan);\n        if (span) {\n            span.setAttribute(SemanticAttributes.HTTP_URL, resource.name);\n            addSpanNetworkEvents(span, resource);\n            this._addCustomAttributesOnResourceSpan(span, resource, (_a = this._getConfig().applyCustomAttributesOnSpan) === null || _a === void 0 ? void 0 : _a.resourceFetch);\n            this._endSpan(span, PTN.RESPONSE_END, resource);\n        }\n    };\n    /**\n     * Helper function for starting a span\n     * @param spanName name of span\n     * @param performanceName name of performance entry for time start\n     * @param entries\n     * @param parentSpan\n     */\n    DocumentLoadInstrumentation.prototype._startSpan = function (spanName, performanceName, entries, parentSpan) {\n        if (hasKey(entries, performanceName) &&\n            typeof entries[performanceName] === 'number') {\n            var span = this.tracer.startSpan(spanName, {\n                startTime: entries[performanceName],\n            }, parentSpan ? trace.setSpan(context.active(), parentSpan) : undefined);\n            return span;\n        }\n        return undefined;\n    };\n    /**\n     * executes callback {_onDocumentLoaded} when the page is loaded\n     */\n    DocumentLoadInstrumentation.prototype._waitForPageLoad = function () {\n        if (window.document.readyState === 'complete') {\n            this._onDocumentLoaded();\n        }\n        else {\n            this._onDocumentLoaded = this._onDocumentLoaded.bind(this);\n            window.addEventListener('load', this._onDocumentLoaded);\n        }\n    };\n    DocumentLoadInstrumentation.prototype._getConfig = function () {\n        return this._config;\n    };\n    /**\n     * adds custom attributes to root span if configured\n     */\n    DocumentLoadInstrumentation.prototype._addCustomAttributesOnSpan = function (span, applyCustomAttributesOnSpan) {\n        var _this = this;\n        if (applyCustomAttributesOnSpan) {\n            safeExecuteInTheMiddle(function () { return applyCustomAttributesOnSpan(span); }, function (error) {\n                if (!error) {\n                    return;\n                }\n                _this._diag.error('addCustomAttributesOnSpan', error);\n            }, true);\n        }\n    };\n    /**\n     * adds custom attributes to span if configured\n     */\n    DocumentLoadInstrumentation.prototype._addCustomAttributesOnResourceSpan = function (span, resource, applyCustomAttributesOnSpan) {\n        var _this = this;\n        if (applyCustomAttributesOnSpan) {\n            safeExecuteInTheMiddle(function () { return applyCustomAttributesOnSpan(span, resource); }, function (error) {\n                if (!error) {\n                    return;\n                }\n                _this._diag.error('addCustomAttributesOnResourceSpan', error);\n            }, true);\n        }\n    };\n    /**\n     * implements enable function\n     */\n    DocumentLoadInstrumentation.prototype.enable = function () {\n        // remove previously attached load to avoid adding the same event twice\n        // in case of multiple enable calling.\n        window.removeEventListener('load', this._onDocumentLoaded);\n        this._waitForPageLoad();\n    };\n    /**\n     * implements disable function\n     */\n    DocumentLoadInstrumentation.prototype.disable = function () {\n        window.removeEventListener('load', this._onDocumentLoaded);\n    };\n    return DocumentLoadInstrumentation;\n}(InstrumentationBase));\nexport { DocumentLoadInstrumentation };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}